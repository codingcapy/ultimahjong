import{u as N,a as y,j as e,L as h,b as i,D as l,c as v,r as b}from"./index-DbELjow2.js";import{u as g,I as G}from"./DashboardStore-BvpgD2hN.js";import"./iconBase-DgdB6cJB.js";function E(){const n=N(),{logoutService:o,authLoading:d,user:m}=y(t=>t),{games:s,setGames:r}=g(t=>t);function a(){o(),n({to:"/"})}async function c(t){var u;t.preventDefault();try{const f={year:"New Game"};if((u=(await i.post(`${l}/api/games`,f)).data)!=null&&u.success){const j=await i.get(`${l}/api/games`),p=[];j.data.forEach(w=>p.push(w)),r([...p])}else throw new Error("Project ID not found in response")}catch(x){console.log(x)}}return e.jsxs("div",{className:"hidden w-[12%] h-screen bg-black text-white md:flex flex-col justify-between",children:[e.jsxs("div",{className:"pt-10 text-center",children:[e.jsx(h,{to:"/",className:"pt-10 text-center font-bold",children:"Ultimate MahJong"}),e.jsx("form",{onSubmit:c,children:e.jsx("button",{className:"m-10 py-2 px-5 bg-green-500 rounded",children:"New Game"})})]}),e.jsxs("div",{className:"flex p-10 pb-20 cursor-pointer",onClick:a,children:[e.jsx(G,{className:" py-1 w-[25px] h-[25px]"}),e.jsx("div",{className:"pl-2 py-0",children:"Logout"})]})]})}const k=v("/dashboard")({component:I});function I(){const{games:n,setGames:o,currentGameId:d,setCurrentGameId:m}=g(s=>s);return b.useEffect(()=>{async function s(){const r=await i.get(`${l}/api/games`),a=[];r.data.forEach(c=>a.push(c)),o([...a])}s()},[]),e.jsx("main",{className:"flex-1 text-white",children:e.jsxs("div",{className:"flex",children:[e.jsx(E,{}),e.jsx("div",{className:"w-[100%] bg-gray-700 h-screen p-10",children:e.jsx("div",{className:"md:grid grid-cols-5 gap-3",children:n.map(s=>e.jsx(h,{to:"/record",onClick:()=>{m(s.game_id),console.log(s.game_id),console.log(d)},children:e.jsx("div",{className:"py-10 bg-gray-600 text-center text-white my-2 md:my-0",children:s.year},s.game_id)},s.game_id))})})]})})}export{k as Route};
