import{u as p,a as j,j as e,L as w,b as d,D as u,r as n,c as b}from"./index-D42CuBDR.js";import{u as g,I as G}from"./DashboardStore-BDepB77p.js";import{b as S}from"./index-BihqZNy3.js";import"./iconBase--9RHdZ-o.js";function E(){const a=p(),{logoutService:o,authLoading:r,user:h}=j(t=>t),{games:m,setGames:c}=g(t=>t);function s(){o(),a({to:"/"})}async function i(t){var l;t.preventDefault();try{const y={year:"New Game"};if((l=(await d.post(`${u}/api/games`,y)).data)!=null&&l.success){const N=await d.get(`${u}/api/games`),f=[];N.data.forEach(v=>f.push(v)),c([...f])}else throw new Error("Project ID not found in response")}catch(x){console.log(x)}}return e.jsxs("div",{className:"hidden w-[12%] h-screen bg-black text-white md:flex flex-col justify-between",children:[e.jsxs("div",{className:"pt-10 text-center",children:[e.jsx(w,{to:"/",className:"pt-10 text-center font-bold",children:"Ultimate MahJong"}),e.jsx("form",{onSubmit:i,children:e.jsx("button",{className:"m-10 py-2 px-5 bg-green-500 rounded",children:"New Game"})})]}),e.jsxs("div",{className:"flex p-10 pb-20 cursor-pointer",onClick:s,children:[e.jsx(G,{className:" py-1 w-[25px] h-[25px]"}),e.jsx("div",{className:"pl-2 py-0",children:"Logout"})]})]})}function I(a){const[o,r]=n.useState(!1),[h,m]=n.useState(!1);n.useState(!1),n.useState(!1),n.useState(a.game.year);const{currentGameId:c,setCurrentGameId:s}=g(i=>i);return e.jsxs(w,{to:"/record",onClick:()=>{s(a.game.game_id),console.log(a.game.game_id),console.log(c)},onMouseEnter:()=>r(!0),onMouseLeave:()=>{r(!1),m(!1)},className:"relative",children:[e.jsx("div",{className:"py-10 bg-gray-600 text-center text-white my-2 md:my-0",children:a.game.year},a.game.game_id),o&&e.jsx(S,{className:"absolute right-3 top-3 "})]},a.game.game_id)}const R=b("/dashboard")({component:L});function L(){const{user:a}=j(s=>s),{games:o,setGames:r,currentGameId:h,setCurrentGameId:m}=g(s=>s),c=p();return n.useEffect(()=>{a||c({to:"/"});async function s(){const i=await d.get(`${u}/api/games`),t=[];i.data.forEach(l=>t.push(l)),r([...t])}s()},[]),e.jsx("main",{className:"flex-1 text-white",children:e.jsxs("div",{className:"flex",children:[e.jsx(E,{}),e.jsx("div",{className:"w-[100%] bg-gray-700 h-screen p-10",children:e.jsx("div",{className:"md:grid grid-cols-5 gap-3",children:o.map(s=>e.jsx(I,{game:s},s.game_id))})})]})})}export{R as Route};
