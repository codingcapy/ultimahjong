import{r as c,j as e,L as y,c as w,u as S,a as k,b as R,d as v,D as b}from"./index-Df8_zOl2.js";import{u as A,T as E,I as C}from"./TopNav-74UXZYXP.js";function D(t){const[a,u]=c.useState(!1),[o,n]=c.useState(!1),[r,i]=c.useState(!1);function x(){u(!a)}return e.jsxs("div",{children:[r&&e.jsxs("div",{className:"fixed z-[201] py-5 px-2 md:px-5 rounded-lg bg-[#1A1A1A] top-[20%] md:top-[20%] left-[5%] md:left-[40%] flex flex-col w-[90%] md:w-[30%]",children:[e.jsx("div",{className:"text-xl py-5 font-bold ",children:"Delete For Eternity"}),e.jsxs("div",{className:"",children:["You are about to permanently delete"," ",e.jsx("span",{className:"text-[#D2B1FD]",children:t.record.record_id}),". This ",e.jsx("br",{})," record will be gone forever."]}),e.jsx("div",{className:"mx-auto py-2",children:e.jsxs("form",{children:[e.jsx("input",{name:"content",id:"content",defaultValue:"[this message was deleted]",className:"hidden"}),e.jsxs("div",{className:"flex ",children:[e.jsx("button",{className:"md:block md:pb-1 edit-btn cursor-pointer px-5 py-2 md:my-2 mx-2 bg-[#BABABA] rounded hover:bg-[#fafafa] transition-all ease duration-300 text-black tracking-widest",onClick:()=>i(!1),children:"CANCEL"}),e.jsx("button",{className:"md:block delete-btn cursor-pointer px-5 py-2 md:my-2 bg-[#DD4B63] rounded hover:bg-red-600 transition-all ease duration-300 tracking-widest",children:"DELETE"})]})]})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black z-[200] opacity-70",onClick:()=>i(!1)}),e.jsxs("div",{className:"grid grid-cols-5 relative",children:[e.jsx("div",{children:t.record.created_at.slice(0,10)}),e.jsx("div",{children:t.record.winner}),e.jsx("div",{children:t.record.loser}),e.jsx("div",{children:t.record.points}),e.jsx("div",{className:"py-2",children:e.jsx(y,{onClick:x,className:"cursor-pointer"})}),a&&e.jsxs("div",{className:"absolute right-5 md:right-44 top-10 md:top-0 bg-[#242424] border border-[#373541] rounded-xl py-5 px-5 z-10",children:[e.jsx("div",{className:"pb-1 cursor-pointer",onClick:()=>n(!0),children:"Edit"}),o&&e.jsx("div",{children:e.jsxs("form",{className:"flex flex-col",children:[e.jsx("input",{name:"title",id:"title",type:"text",className:"bg-transparent border border-[#373541] px-1"}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{className:"pr-2",children:"Update"}),e.jsx("button",{className:"px-2",onClick:()=>n(!1),children:"Cancel"})]})]})}),e.jsx("div",{className:"flex my-2",children:e.jsx("div",{className:"text-[#D2B1FC] cursor-pointer",onClick:()=>i(!0),children:"Delete"})})]})]},t.record.record_id)]})}const F=w("/record")({component:L});function L(){const t=S(),{logoutService:a,authLoading:u,user:o}=k(s=>s),[n,r]=c.useState(""),{currentGameId:i}=A(s=>s),[x,j]=c.useState([]);function g(){a(),t({to:"/"})}c.useEffect(()=>{console.log(o),o||t({to:"/"});async function s(){const l=Number(i),h=await v.get(`${b}/api/records/${l}`),d=[];h.data.forEach(m=>d.push(m)),j([...d])}s()},[]);async function f(s){s.preventDefault();try{const l=s.target.winner.value;console.log(l);const h=s.target.loser.value;console.log(h);const d=Number(s.target.points.value);console.log(d);const m=i;console.log(i);const N={game_id:m,winner:l,loser:h,points:d},p=await v.post(`${b}/api/records`,N);p.data.success?(r("Success!"),j([...x,p.data.record])):r("Failure")}catch(l){r("There was an issue adding record :("),console.log(l)}}return console.log(i),e.jsxs("main",{className:"flex-1 text-white",children:[e.jsx(E,{}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"hidden md:fixed w-[12%] h-screen bg-black text-white md:flex flex-col justify-between",children:[e.jsx("div",{className:"pt-10 text-center",children:e.jsx(R,{to:"/",className:"pt-10 text-center font-bold",children:"Ultimate MahJong"})}),e.jsxs("div",{className:"flex p-10 pb-20 cursor-pointer",onClick:g,children:[e.jsx(C,{className:" py-1 w-[25px] h-[25px]"}),e.jsx("div",{className:"pl-2 py-0",children:"Logout"})]})]}),e.jsxs("div",{className:"w-[100%] bg-gray-700 min-h-screen p-10 md:pl-72",children:[e.jsxs("form",{className:"flex flex-col w-[300px] mx-auto",onSubmit:f,children:[e.jsx("h1",{className:"text-center text-xl font-bold mt-5 mb-2",children:"Add New Record"}),e.jsx("h2",{className:"mb-2 text-center text-sm",children:"Add a new record"}),e.jsx("label",{htmlFor:"winner",children:"Winner"}),e.jsxs("select",{className:"mb-2 text-black",id:"winner",name:"winner",required:!0,children:[e.jsx("option",{value:"Popo",children:"Popo"}),e.jsx("option",{value:"Rebecca",children:"Rebecca"}),e.jsx("option",{value:"Stephanie",children:"Stephanie"}),e.jsx("option",{value:"Justin",children:"Justin"})]}),e.jsx("label",{htmlFor:"loser",children:"Loser"}),e.jsxs("select",{className:"mb-2 text-black",id:"loser",name:"loser",required:!0,children:[e.jsx("option",{value:"Popo",children:"Popo"}),e.jsx("option",{value:"Rebecca",children:"Rebecca"}),e.jsx("option",{value:"Stephanie",children:"Stephanie"}),e.jsx("option",{value:"Justin",children:"Justin"})]}),e.jsx("label",{htmlFor:"points",children:"Points"}),e.jsx("input",{className:"text-black",type:"number",id:"points",name:"points",required:!0}),e.jsx("button",{className:"bg-green-800 text-white mt-5 px-10 py-2",children:"Add"})]}),e.jsx("div",{className:n==="Success!"?"py-2 text-center text-green-500":"py-2 text-center text-red-500",children:n}),e.jsx("h2",{className:"text-center text-xl font-bold mt-10 mb-2",children:"Players"}),e.jsx("h2",{className:"mb-2 text-center text-sm",children:"Summary of players' stats"}),e.jsxs("div",{className:"bg-gray-500 grid grid-cols-3",children:[e.jsx("div",{children:"Player"}),e.jsx("div",{children:"Total Points"}),e.jsx("div",{children:"Total $"})]}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsx("div",{children:"Popo"}),e.jsx("div",{children:"200"}),e.jsx("div",{children:"$20"})]}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsx("div",{children:"Rebecca"}),e.jsx("div",{children:"200"}),e.jsx("div",{children:"$20"})]}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsx("div",{children:"Stephanie"}),e.jsx("div",{children:"200"}),e.jsx("div",{children:"$20"})]}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsx("div",{children:"Justin"}),e.jsx("div",{children:"200"}),e.jsx("div",{children:"$20"})]}),e.jsx("h2",{className:"text-center text-xl font-bold mt-10 mb-2",children:"Records"}),e.jsx("h2",{className:"text-sm text-center mb-2",children:"All records for 2025"}),e.jsxs("div",{className:"bg-gray-500 grid grid-cols-5",children:[e.jsx("div",{children:"date"}),e.jsx("div",{children:"winner"}),e.jsx("div",{children:"loser"}),e.jsx("div",{children:"points won"})]}),x.map(s=>e.jsx(D,{record:s}))]})]})]})}export{F as Route};
